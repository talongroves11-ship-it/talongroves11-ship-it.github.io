<!DOCTYPE html>
<html>
<head>
<title>Drift Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body { margin:0; overflow:hidden; background:#222; }
    canvas { background:#333; display:block; margin:0 auto; }
    #controls {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 20px;
    }
    .btn {
        width: 70px;
        height: 70px;
        background: #ffffff44;
        border-radius: 50%;
        border: 2px solid #fff;
        touch-action:none;
    }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<!-- Mobile controls -->
<div id="controls">
    <div class="btn" id="left"></div>
    <div class="btn" id="right"></div>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// CAR
let car = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    angle: 0,
    speed: 0,
    maxSpeed: 6,
    accel: 0.15,
    friction: 0.05,
    turnSpeed: 3
};

let keys = { left: false, right: false, up: false };

// Keyboard controls
document.addEventListener("keydown", e => {
    if (e.key === "ArrowLeft") keys.left = true;
    if (e.key === "ArrowRight") keys.right = true;
    if (e.key === "ArrowUp") keys.up = true;
});
document.addEventListener("keyup", e => {
    if (e.key === "ArrowLeft") keys.left = false;
    if (e.key === "ArrowRight") keys.right = false;
    if (e.key === "ArrowUp") keys.up = false;
});

// Mobile buttons
document.getElementById("left").ontouchstart = () => keys.left = true;
document.getElementById("left").ontouchend   = () => keys.left = false;
document.getElementById("right").ontouchstart = () => keys.right = true;
document.getElementById("right").ontouchend   = () => keys.right = false;

// GAME LOOP
function loop() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Acceleration
    if (keys.up) {
        car.speed += car.accel;
        if (car.speed > car.maxSpeed) car.speed = car.maxSpeed;
    } else {
        car.speed -= car.friction;
        if (car.speed < 0) car.speed = 0;
    }

    // Turning + drifting effect
    if (car.speed > 0.3) {
        if (keys.left)  car.angle -= car.turnSpeed * (car.speed / car.maxSpeed);
        if (keys.right) car.angle += car.turnSpeed * (car.speed / car.maxSpeed);
    }

    // Movement
    car.x += Math.cos(car.angle) * car.speed;
    car.y += Math.sin(car.angle) * car.speed;

    // Wrap edges
    if (car.x < 0) car.x = canvas.width;
    if (car.x > canvas.width) car.x = 0;
    if (car.y < 0) car.y = canvas.height;
    if (car.y > canvas.height) car.y = 0;

    // Draw car
    ctx.save();
    ctx.translate(car.x, car.y);
    ctx.rotate(car.angle);
    ctx.fillStyle = "red";
    ctx.fillRect(-20, -10, 40, 20);
    ctx.restore();

    requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
